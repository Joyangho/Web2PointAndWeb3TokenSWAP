<!doctype html>
<html lang="ko">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>μ¬ν™” κµν™ μ„λΉ„μ¤ β€“ Points β†” BGOV (Voucher System)</title>

  <!-- Fonts -->
  <link
    href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700&family=Space+Grotesk:wght@400;600;700&display=swap"
    rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="styles.css" />

  <!-- Ethers v6 (UMD μ „μ—­ λ²λ“¤) -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.13.2/dist/ethers.umd.min.js"></script>
</head>

<body>
  <div class="bg-grid"></div>

  <!-- ===== μƒλ‹¨: μ§€κ°‘/μ”μ•½ λ°•μ¤ ===== -->
  <header class="hero glass">
    <div class="brand">
      <div class="mark">BGOV</div>
      <div class="title">
        <h1>μ¬ν™” κµν™ μ„λΉ„μ¤</h1>
        <p class="tag">Points β†” BGOV β€Ά Voucher System β€Ά Governance Ready</p><br>
        <a href="guide.html" class="btn ghost small" target="_blank">μ‚¬μ©μ κ°€μ΄λ“</a>
      </div>
    </div>

    <div class="wallet">
      <button id="connect" class="btn connect" type="button">μ§€κ°‘ μ—°κ²°</button>
      <div class="who">
        <span id="addr">μ—°κ²°λμ§€ μ•μ</span>
        <span id="ethBal">β€“ ETH</span>
      </div>
      <div class="metrics">
        <div class="metric"><span class="lab">λ‚΄ ν¬μΈνΈ</span><strong id="points">-</strong></div>
        <button id="earn50" class="btn ghost small" type="button">ν¬μΈνΈ λ°›κΈ° +50</button>
        <button id="refreshPoints" class="btn ghost small" type="button">ν¬μΈνΈ μƒλ΅κ³ μΉ¨</button>
        <a id="btnScan" class="link-btn" target="_blank" rel="noreferrer">Etherscan (Sepolia)</a>
      </div>
    </div>
    <p class="hint">μ›Ή2 <-> μ›Ή3 ν† ν°μ„ μ¤μ™‘ν•λ” 2κ°€μ§€ λ°©λ²•μ„ κ³ λ―Όν–μµλ‹λ‹¤.</p>
    <p class="hint">μ²«λ²μ§Έ λ°©λ²•, μ‚¬μ©μκ°€ ν† ν° κµν™μ„ κ΄€λ¦¬μμ—κ² μ”μ²­ν•λ©΄, μλ™μΌλ΅ μ‚¬μ©μμ—κ² ν† ν°μ„ mint ν•΄μ£Όλ” API μ”μ²­ λ°©λ²•μ…λ‹λ‹¤. <br>γ„΄μ‚¬μ©μκ°€ κ°€μ¤λΉ„λ¥Ό λ‚΄μ§€ μ•λ”λ‹¤λ” κ²ƒκ³Ό, UX
      νΈλ¦¬ν•¨μ΄ μμ§€λ§, κ΄€λ¦¬μκ°€ κ°€μ¤λΉ„λ¥Ό μ§€λ¶ν•΄μ•Ό ν•λ” λ¶€λ‹΄μ΄ μμµλ‹λ‹¤.</p>
    <p class="hint">λ‘λ²μ§Έ λ°©λ²•, ν„μ¬ κ°λ°λ λ°”μ°μ² μ‹μ¤ν…μΌλ΅ μ‚¬μ©μκ°€ μ§μ ‘ ν¬μΈνΈλ¥Ό λ°”μ°μ²λ΅ μƒμ„±ν•μ—¬ κ΄€λ¦¬μμ μ§€κ°‘ν‚¤λ΅ μ„λ…μ„ κ²€μ¦ν•κ³ , μ‚¬μ©μκ°€ κ·Έ λ°”μ°μ²λ΅ mintν•λ” λ°©λ²•μ…λ‹λ‹¤. <br>γ„΄μ‚¬μ©μκ°€
      κ°€μ¤λΉ„λ¥Ό λ¶€λ‹΄ν•λ©°, μƒλ€μ μΌλ΅ μλ™ν™” κµ¬ν„μ΄ μ‰½κ² κ°€λ¥ν•©λ‹λ‹¤.</p>
    <p class="hint">μ΄κΈ°λ” API ν•νƒλ΅ μ‚¬μ©μμ—κ² UX μ κ³µκ³Ό κ°€μ¤λΉ„ λ¶€λ‹΄μ„ μ¤„μ΄κ³ , μ¶”ν›„ ν™•μ¥λλ‹¤λ©΄ λ°”μ°μ² μ‹μ¤ν…μ„ λ„μ…ν•λ” κ²ƒμ„ κ³ λ ¤ν•  μ μμµλ‹λ‹¤.</p>
  </header>

  <!-- ===== λ°”μ°μ² μ‹μ¤ν… μ„Ήμ… ===== -->
  <main class="voucher-section glass">
    <div class="section-header">
      <h2>π’ λ°”μ°μ² μ‹μ¤ν…</h2>
      <p class="hint">ν¬μΈνΈλ¥Ό μ‚¬μ©ν•΄ λ°”μ°μ²λ¥Ό μƒμ„±ν•κ³ , λ°”μ°μ²λ΅ ν† ν°μ„ λ°›μΌμ„Έμ”</p>
    </div>

    <!-- λ°”μ°μ² μƒμ„± -->
    <section class="voucher-create">
      <h3>1. λ°”μ°μ² μƒμ„± (ν¬μΈνΈ β†’ λ°”μ°μ²)</h3>
      <div class="controls">
        <input id="pointsToSpend" type="number" min="0" placeholder="μ‚¬μ©ν•  ν¬μΈνΈ μ…λ ¥" />
        <button id="createVoucher" class="btn primary" type="button">λ°”μ°μ² μƒμ„±</button>
      </div>
      <div id="tx" class="status"></div>
    </section>

    <!-- λ°”μ°μ² λ©λ΅ -->
    <section class="voucher-list-section">
      <div class="list-header">
        <h3>2. λ‚΄ λ°”μ°μ² λ©λ΅</h3>
        <button id="refreshVouchers" class="btn ghost small" type="button">μƒλ΅κ³ μΉ¨</button>
      </div>
      <div id="voucherList" class="voucher-list">
        <div class="loading">λ°”μ°μ² λ©λ΅μ„ λ¶λ¬μ¤λ” μ¤‘...</div>
      </div>
    </section>
  </main>

  <!-- ===== ν† ν° β†’ ν¬μΈνΈ κµν™ ===== -->
  <section class="reverse-exchange glass">
    <h2>ν† ν° β†’ ν¬μΈνΈ κµν™</h2>
    <p class="hint">BGOV ν† ν°μ„ μ†κ°ν•μ—¬ ν¬μΈνΈλ΅ κµν™ν•©λ‹λ‹¤ (1:1 λΉ„μ¨)</p>

    <!-- ν„μ¬ μƒνƒ μ •λ³΄ -->
    <div class="token-info-grid">
      <div class="info-card">
        <span class="info-label">λ‚΄ BGOV μ”μ•΅</span>
        <strong id="tokenBalance" class="info-value">-</strong>
      </div>
      <!-- μΉμΈ(allowance) μΉ΄λ“λ” μ‚­μ  -->
      <div class="info-actions">
        <button id="refreshTokenInfo" class="btn ghost small" type="button">μƒλ΅κ³ μΉ¨</button>
      </div>
    </div>

    <!-- κµν™ μ‹¤ν–‰ -->
    <div class="exchange-controls">
      <input id="tokensToSpend" type="number" min="0" placeholder="μ†κ°ν•  ν† ν° μλ‰ μ…λ ¥" />
      <button id="exchangeTokens" class="btn primary" type="button">μ†κ° + ν¬μΈνΈ λ°›κΈ°</button>
    </div>

    <div id="txExchange" class="status"></div>
  </section>


  <!-- ===== ν–¥μƒλ κ±°λ²„λ„μ¤ & μ”μ•΅ μ„Ήμ… ===== -->
  <section class="owned glass">
    <div class="owned-head">
      <h3>κ±°λ²„λ„μ¤ λ„κµ¬</h3>
      <div class="links">
        <a id="linkEtherscan" href="#" target="_blank" class="link-btn">ν† ν° κ³„μ•½ (Sepolia)</a>
      </div>
    </div>

    <!-- μ„μ„ ν•„μ” μ•λ¦Ό -->
    <div id="delegationAlert" class="delegation-alert" style="display: none;">
      <div class="alert-icon">β οΈ</div>
      <div class="alert-content">
        <strong>μ„μ„ κ΄€λ ¨!</strong><br>
        <span id="undelegatedAmount">0</span> BGOV ν† ν°μ΄ λ³ΈμΈμ—κ² μ„μ„λμ§€ μ•μ•μµλ‹λ‹¤. ν¬ν‘κ¶μ„ ν™μ„±ν™”ν•λ ¤λ©΄ λ³ΈμΈμ—κ² μ„μ„ν•΄μ£Όμ„Έμ”.
      </div>
      <button onclick="$('#delegateSelf').click()" class="alert-action">λ‚μ—κ² λ°”λ΅ μ„μ„ν•κΈ°</button>
    </div>

    <div class="gov-grid">
      <!-- ν† ν° μ”μ•΅ λ° ν¬ν‘λ ¥ -->
      <div class="card governance-status">
        <h4>κ±°λ²„λ„μ¤ μƒνƒ</h4>

        <div class="governance-info">
          <div class="gov-metric">
            <span class="metric-label">BGOV μ”μ•΅</span>
            <div id="gov" class="metric-value">-</div>
          </div>

          <div class="gov-metric">
            <span class="metric-label">ν¬ν‘λ ¥</span>
            <div id="votingPower" class="metric-value voting-power">-</div>
          </div>

          <div class="gov-metric">
            <span class="metric-label">μ„μ„ μƒνƒ</span>
            <div id="delegatedTo" class="delegate-status none">-</div>
          </div>
        </div>

        <button id="refreshGov" class="btn ghost" type="button">μ •λ³΄ μƒλ΅κ³ μΉ¨</button>
      </div>

      <!-- ν¬ν‘κ¶ μ„μ„ -->
      <div class="card delegation-controls">
        <h4>ν¬ν‘κ¶ μ„μ„</h4>
        <p class="hint">ν† ν° μ”μ•΅μ„ ν¬ν‘κ¶μΌλ΅ ν™μ„±ν™”ν•λ ¤λ©΄ μ„μ„μ΄ ν•„μ”ν•©λ‹λ‹¤.</p>

        <div class="delegation-options">
          <button id="delegateSelf" class="btn primary" type="button">λ‚μ—κ² μ„μ„</button>

          <div class="delegate-other">
            <input id="delegateAddr" type="text" placeholder="μ„μ„ λ€μƒ μ£Όμ† (0xβ€¦)" />
            <button id="delegateOther" class="btn secondary" type="button">μ£Όμ†λ΅ μ„μ„</button>
          </div>
        </div>

        <div id="txDeleg" class="status"></div>
      </div>
    </div>
  </section>

  <!-- ===== μ „μ—­ λ΅λ”© μ¤λ²„λ μ΄ ===== -->
  <div id="overlay" class="overlay hidden">
    <div class="spinner"></div>
    <p id="overlayMsg">μ²λ¦¬ μ¤‘β€¦</p>
  </div>

  <footer class="foot">
    <small>Β© Blooming Demo β€“ Voucher System β€“ Points β†” BGOV</small>
  </footer>

  <script src="utils.js"></script>
  <script src="config.js"></script>
  <script src="wallet.js"></script>
  <script src="points.js"></script>
  <script src="vouchers.js"></script>
  <script src="tokenExchange.js"></script>
  <script src="governance.js"></script>
  <script src="main.js"></script>
</body>

</html>